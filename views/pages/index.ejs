<!-- Hero Section -->
<section class="hero-section">
    <div class="hero-content">
        <h1 class="hero-title">欢迎来到 <%= config.site.title %></h1>
        <p class="hero-description"><%= config.site.description %></p>
        <div class="hero-actions">
            <a href="/posts" class="btn btn-primary">浏览文章</a>
            <a href="/about" class="btn btn-outline">了解更多</a>
        </div>
    </div>
</section>

<!-- Latest Posts Section -->
<section class="latest-posts">
    <div class="section-header">
        <h2 class="section-title">最新文章</h2>
        <a href="/posts" class="section-link">查看全部 →</a>
    </div>
    
    <% if (posts && posts.length > 0) { %>
    <div class="posts-grid">
        <% posts.forEach(post => { %>
        <article class="post-card">
            <% if (post.cover) { %>
            <div class="post-cover">
                <a href="/post/<%= post.slug %>">
                    <img src="<%= post.cover %>" alt="<%= post.title %>" loading="lazy">
                </a>
            </div>
            <% } %>
            
            <div class="post-content">
                <div class="post-meta">
                    <time class="post-date" datetime="<%= post.date %>">
                        <%= moment(post.date).format('YYYY年MM月DD日') %>
                    </time>
                    <span class="post-category">
                        <a href="/category/<%= post.category %>"><%= post.category %></a>
                    </span>
                </div>
                
                <h3 class="post-title">
                    <a href="/post/<%= post.slug %>"><%= post.title %></a>
                </h3>
                
                <p class="post-excerpt"><%= post.excerpt %></p>
                
                <div class="post-footer">
                    <div class="post-tags">
                        <% if (post.tags && post.tags.length > 0) { %>
                            <% post.tags.slice(0, 3).forEach(tag => { %>
                            <a href="/tag/<%= tag %>" class="tag">#<%= tag %></a>
                            <% }); %>
                        <% } %>
                    </div>
                    
                    <div class="post-stats">
                        <span class="reading-time">
                            <i class="fas fa-clock"></i>
                            <%= post.readingTime %> 分钟阅读
                        </span>
                    </div>
                </div>
                
                <a href="/post/<%= post.slug %>" class="read-more">阅读全文 →</a>
            </div>
        </article>
        <% }); %>
    </div>
    <% } else { %>
    <div class="empty-state">
        <div class="empty-icon">
            <i class="fas fa-file-alt"></i>
        </div>
        <h3>暂无文章</h3>
        <p>还没有发布任何文章，<a href="/admin">去管理后台</a> 创建第一篇文章吧！</p>
    </div>
    <% } %>
</section>

<!-- Categories Section -->
<section class="categories-section">
    <div class="section-header">
        <h2 class="section-title">文章分类</h2>
    </div>
    
    <div class="categories-grid">
        <% 
        // 获取所有分类（这里简化处理，实际应该从数据中获取）
        const categories = [...new Set(posts.map(post => post.category))].slice(0, 6);
        %>
        <% categories.forEach(category => { %>
        <% const categoryPosts = posts.filter(post => post.category === category); %>
        <div class="category-card">
            <a href="/category/<%= category %>" class="category-link">
                <div class="category-icon">
                    <i class="fas fa-folder"></i>
                </div>
                <h3 class="category-name"><%= category %></h3>
                <p class="category-count"><%= categoryPosts.length %> 篇文章</p>
            </a>
        </div>
        <% }); %>
    </div>
</section>

<!-- Newsletter Section -->
<section class="newsletter-section">
    <div class="newsletter-content">
        <h2 class="newsletter-title">订阅我们的博客</h2>
        <p class="newsletter-description">获取最新文章和更新通知</p>
        
        <div class="newsletter-form">
            <div class="form-group">
                <input type="email" placeholder="输入您的邮箱地址" class="newsletter-input">
                <button type="button" class="btn btn-primary newsletter-btn">订阅</button>
            </div>
            <p class="newsletter-note">我们承诺不会发送垃圾邮件</p>
        </div>
        
        <!-- RSS 订阅 -->
        <div class="rss-subscribe">
            <a href="/rss.xml" class="rss-link" target="_blank">
                <i class="fas fa-rss"></i>
                RSS 订阅
            </a>
        </div>
    </div>
</section>

<!-- Featured Section -->
<% if (posts && posts.length > 0) { %>
<section class="featured-section">
    <div class="section-header">
        <h2 class="section-title">精选文章</h2>
    </div>
    
    <div class="featured-posts">
        <% 
        // 获取前3篇文章作为精选
        const featuredPosts = posts.slice(0, 3);
        %>
        <% featuredPosts.forEach((post, index) => { %>
        <article class="featured-post <%= index === 0 ? 'featured-main' : 'featured-side' %>">
            <% if (post.cover) { %>
            <div class="featured-cover">
                <a href="/post/<%= post.slug %>">
                    <img src="<%= post.cover %>" alt="<%= post.title %>" loading="lazy">
                </a>
            </div>
            <% } %>
            
            <div class="featured-content">
                <div class="post-meta">
                    <time class="post-date" datetime="<%= post.date %>">
                        <%= moment(post.date).format('MM月DD日') %>
                    </time>
                    <span class="post-category">
                        <a href="/category/<%= post.category %>"><%= post.category %></a>
                    </span>
                </div>
                
                <h3 class="featured-title">
                    <a href="/post/<%= post.slug %>"><%= post.title %></a>
                </h3>
                
                <% if (index === 0) { %>
                <p class="featured-excerpt"><%= post.excerpt %></p>
                <% } %>
                
                <div class="featured-footer">
                    <span class="post-author">
                        <i class="fas fa-user"></i>
                        <%= post.author %>
                    </span>
                    <span class="reading-time">
                        <i class="fas fa-clock"></i>
                        <%= post.readingTime %> 分钟
                    </span>
                </div>
            </div>
        </article>
        <% }); %>
    </div>
</section>
<% } %>

<!-- Pagination -->
<% if (pagination && pagination.total > 1) { %>
<nav class="pagination-nav">
    <div class="pagination">
        <% if (pagination.hasPrev) { %>
        <a href="/?page=<%= pagination.prevPage %>" class="pagination-link pagination-prev">
            <i class="fas fa-chevron-left"></i>
            上一页
        </a>
        <% } %>
        
        <div class="pagination-info">
            第 <%= pagination.current %> 页，共 <%= pagination.total %> 页
        </div>
        
        <% if (pagination.hasNext) { %>
        <a href="/?page=<%= pagination.nextPage %>" class="pagination-link pagination-next">
            下一页
            <i class="fas fa-chevron-right"></i>
        </a>
        <% } %>
    </div>
</nav>
<% } %>

<script>
// 邮件订阅功能（示例）
document.addEventListener('DOMContentLoaded', function() {
    const newsletterBtn = document.querySelector('.newsletter-btn');
    const newsletterInput = document.querySelector('.newsletter-input');
    
    if (newsletterBtn && newsletterInput) {
        newsletterBtn.addEventListener('click', function() {
            const email = newsletterInput.value.trim();
            
            if (!email) {
                alert('请输入邮箱地址');
                return;
            }
            
            if (!isValidEmail(email)) {
                alert('请输入有效的邮箱地址');
                return;
            }
            
            // 这里可以实现实际的订阅逻辑
            alert('感谢订阅！我们会将最新内容发送到您的邮箱。');
            newsletterInput.value = '';
        });
        
        newsletterInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                newsletterBtn.click();
            }
        });
    }
    
    function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }
});
</script>