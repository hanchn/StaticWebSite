<!DOCTYPE html>
<html lang="<%= site.language || 'zh-CN' %>">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO Meta Tags -->
  <% if (typeof seo !== 'undefined' && seo) { %>
    <title><%= seo.title %></title>
    <meta name="description" content="<%= seo.description %>">
    <meta name="keywords" content="<%= seo.keywords %>">
    <meta name="author" content="<%= seo.author %>">
    <meta name="robots" content="<%= seo.robots %>">
    
    <% if (seo.canonical) { %>
      <link rel="canonical" href="<%= seo.canonical %>">
    <% } %>
    
    <!-- Open Graph -->
    <% if (seo.openGraph) { %>
      <meta property="og:type" content="<%= seo.openGraph.type %>">
      <meta property="og:title" content="<%= seo.openGraph.title %>">
      <meta property="og:description" content="<%= seo.openGraph.description %>">
      <meta property="og:url" content="<%= seo.openGraph.url %>">
      <meta property="og:site_name" content="<%= seo.openGraph.siteName %>">
      <meta property="og:locale" content="<%= seo.openGraph.locale %>">
      <% if (seo.openGraph.image) { %>
        <meta property="og:image" content="<%= seo.openGraph.image %>">
      <% } %>
      <% if (seo.openGraph.article) { %>
        <meta property="article:published_time" content="<%= seo.openGraph.article.publishedTime %>">
        <meta property="article:modified_time" content="<%= seo.openGraph.article.modifiedTime %>">
        <% if (seo.openGraph.article.author) { %>
          <meta property="article:author" content="<%= seo.openGraph.article.author %>">
        <% } %>
        <% if (seo.openGraph.article.section) { %>
          <meta property="article:section" content="<%= seo.openGraph.article.section %>">
        <% } %>
        <% if (seo.openGraph.article.tags) { %>
          <% seo.openGraph.article.tags.forEach(tag => { %>
            <meta property="article:tag" content="<%= tag %>">
          <% }) %>
        <% } %>
      <% } %>
    <% } %>
    
    <!-- Twitter Card -->
    <% if (seo.twitter) { %>
      <meta name="twitter:card" content="<%= seo.twitter.card %>">
      <meta name="twitter:title" content="<%= seo.twitter.title %>">
      <meta name="twitter:description" content="<%= seo.twitter.description %>">
      <% if (seo.twitter.site) { %>
        <meta name="twitter:site" content="<%= seo.twitter.site %>">
      <% } %>
      <% if (seo.twitter.creator) { %>
        <meta name="twitter:creator" content="<%= seo.twitter.creator %>">
      <% } %>
      <% if (seo.twitter.image) { %>
        <meta name="twitter:image" content="<%= seo.twitter.image %>">
      <% } %>
    <% } %>
    
    <!-- JSON-LD Structured Data -->
    <% if (seo.jsonLd && seo.jsonLd.length) { %>
      <% seo.jsonLd.forEach(data => { %>
        <script type="application/ld+json"><%- JSON.stringify(data, null, 2) %></script>
      <% }) %>
    <% } %>
  <% } else { %>
    <title><%= page.title ? page.title + ' | ' + site.title : site.title %></title>
    <meta name="description" content="<%= page.description || site.description %>">
  <% } %>
  
  <!-- RSS Feeds -->
  <% if (site.url) { %>
    <link rel="alternate" type="application/rss+xml" title="<%= site.title %> RSS" href="<%= site.url %>/rss.xml">
    <link rel="alternate" type="application/atom+xml" title="<%= site.title %> Atom" href="<%= site.url %>/atom.xml">
    <link rel="alternate" type="application/json" title="<%= site.title %> JSON Feed" href="<%= site.url %>/feed.json">
  <% } %>
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <!-- Styles -->
  <link rel="stylesheet" href="/css/style.css">
  
  <!-- Additional head content -->
  <% if (typeof head !== 'undefined') { %><%- head %><% } %>
</head>
<body class="<%= page.layout || 'default' %>">
  <!-- Header -->
  <header class="site-header">
    <div class="container">
      <div class="header-content">
        <div class="site-branding">
          <h1 class="site-title">
            <a href="/"><%= site.title %></a>
          </h1>
          <% if (site.subtitle) { %>
            <p class="site-subtitle"><%= site.subtitle %></p>
          <% } %>
        </div>
        
        <nav class="site-nav">
          <ul class="nav-menu">
            <li><a href="/" class="<%= page.url === '/' ? 'active' : '' %>">首页</a></li>
            <li><a href="/posts" class="<%= page.url.startsWith('/posts') ? 'active' : '' %>">文章</a></li>
            <li><a href="/categories" class="<%= page.url.startsWith('/categories') ? 'active' : '' %>">分类</a></li>
            <li><a href="/tags" class="<%= page.url.startsWith('/tags') ? 'active' : '' %>">标签</a></li>
            <li><a href="/about" class="<%= page.url === '/about' ? 'active' : '' %>">关于</a></li>
            <li><a href="/search" class="<%= page.url === '/search' ? 'active' : '' %>">搜索</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>
  
  <!-- Main Content -->
  <main class="site-main">
    <div class="container">
      <!-- Breadcrumbs -->
      <% if (page.breadcrumbs && page.breadcrumbs.length > 1) { %>
        <nav class="breadcrumbs">
          <ol>
            <% page.breadcrumbs.forEach((crumb, index) => { %>
              <li>
                <% if (index === page.breadcrumbs.length - 1) { %>
                  <span><%= crumb.title %></span>
                <% } else { %>
                  <a href="<%= crumb.url %>"><%= crumb.title %></a>
                <% } %>
              </li>
            <% }) %>
          </ol>
        </nav>
      <% } %>
      
      <!-- Page Content -->
      <%- body %>
    </div>
  </main>
  
  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-info">
          <p>&copy; <%= new Date().getFullYear() %> <%= site.title %>. All rights reserved.</p>
          <% if (site.author) { %>
            <p>Created by <%= site.author %></p>
          <% } %>
        </div>
        
        <div class="footer-links">
          <ul>
            <li><a href="/rss.xml">RSS</a></li>
            <li><a href="/atom.xml">Atom</a></li>
            <li><a href="/sitemap.xml">Sitemap</a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer>
  
  <!-- Scripts -->
  <script src="/js/main.js"></script>
  
  <!-- Additional scripts -->
  <% if (typeof scripts !== 'undefined') { %><%- scripts %><% } %>
</body>
</html>